gnt_interaction = {
	category = interaction_category_vassal
	icon = icon_vassal
	desc = gnt_interaction_desc
	
	auto_accept = yes
	
	is_shown = {
		scope:actor = {
	        government_has_flag = government_is_feudal
		}
		scope:recipient = {
			is_ai = yes
			is_independent_ruler = no
			is_lowborn = yes
		}
		NOT = { scope:recipient = scope:actor }
	}

	is_valid_showing_failures_only = {
	    scope:recipient = {
		    is_courtier_of = scope:actor
			scope:recipient.faith = scope:actor.faith
			is_adult = yes
			is_female = no
			is_imprisoned = no
			NOT = { has_trait = devoted }
		}
	}
	
	on_accept = {
		scope:recipient = {
			custom_tooltip = {
				text = gnt_create_dynasty_tt
				create_dynasty = {
		            spread_to_descendants = yes
	            }
			}
		    add_prestige = 300
			add_opinion = {
				modifier = gnt_opinion
				target = scope:actor
			}
			create_character_memory = {
	            type = gnt_memory

	            participants = {
		            my_lord = scope:actor
	            }
            }
		}
	}
	cost = {
	    prestige = 150
		piety = 50
	}
}

gnt_create_noble_Estate_interaction = {
	category = interaction_category_vassal
	icon = icon_vassal
	desc = gnt_create_noble_Estate_interaction_desc

	is_shown = {
	    scope:actor = {
		    any_held_title = {
				is_noble_family_title = no
			}
	        government_has_flag = government_is_feudal
		}
		scope:recipient = {
			is_ai = yes
			is_independent_ruler = no
			is_manor_lord = no
		}
	}

	is_valid_showing_failures_only = {
	    scope:actor = {
			highest_held_title_tier > tier_county
			culture = {
				has_innovation = innovation_manorialism
			}
		}
	    scope:recipient = {
		    is_courtier_of = scope:actor
			scope:recipient.faith = scope:actor.faith
			is_adult = yes
			is_female = no
			is_imprisoned = no
			is_lowborn = no
			NOT = { has_trait = devoted }
		}
	}

	auto_accept = yes

	on_accept = {
	    scope:actor = {
		    trigger_event = {
			    id = gnt_switch_character_event.0001
				days = 0
		    }
		}
		scope:recipient = {
		    custom_tooltip = {
				text = gnt_create_noble_Estate_tt
				gnt_create_noble_Estate_effect = { GOVERNMENT_GIVER = this }
			}
			add_prestige = 750
			add_opinion = {
			    modifier = became_vassal
			    target = scope:actor
			    opinion = 10
		    }
    		create_title_and_vassal_change = {
		        type = swear_fealty
		        save_scope_as = change
	        }
	        scope:recipient = {
		        change_liege = {
			        liege = scope:actor
			        change = scope:change
		        }
	        }
	        resolve_title_and_vassal_change = scope:change
		    trigger_event = {
			    id = gnt_switch_character_event.0002
				days = 3
		    }
		}
	}
	cost = {
	    gold = {
		    value = { add = gnt_gold_cost_value }
		}
		prestige = 300
		piety = 150
	}
	#################################################################
	ai_frequency = 13
	ai_potential = {
		is_at_war = no
		is_adult = yes
		gold >= 100
	}
	ai_targets = {
	    ai_recipients = courtiers
		max = 15
	}
	ai_will_do = {
	    base = 0

		modifier = {
			has_game_rule = gnt_ai_grant_estate_never
		    add = -500
		}
		modifier = {
			has_game_rule = gnt_ai_grant_estate_normal
		    add = 75
		}
		modifier = {
			has_game_rule = gnt_ai_grant_estate_less
			add = 30
		}

		modifier = {
			add = 20
			scope:recipient = {
				OR = {
					has_secret_relation_lover = scope:actor
					has_relation_lover = scope:actor
					has_relation_soulmate = scope:actor
					has_relation_friend = scope:actor
					has_relation_best_friend = scope:actor
				}
			}
		}
		modifier = {
		    add = -500
		    scope:recipient = {
		        is_spouse_of = scope:actor
			}
		}
		modifier = {
		    add = -20
		    scope:recipient = {
		        is_house_head = no
			}
		}
		modifier = {
		    add = -500
		    scope:recipient = {
		        any_parent = { highest_held_title_tier >= tier_county }
			}
		}
		modifier = {
		    add = -500
		    scope:recipient = { is_close_or_extended_family_of = scope:actor }
		}
	}
}